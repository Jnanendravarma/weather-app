<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeatherSphere - Real-time Weather App v2.0</title>
    <meta name="description" content="Beautiful real-time weather application with advanced features, stunning animations, and offline support">
    <meta name="keywords" content="weather, forecast, real-time, weather app, temperature, humidity, wind, rain, snow">
    <meta name="author" content="WeatherSphere">
    
    <!-- Version stamp for cache busting -->
    <meta name="version" content="2.0-voice-enabled">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WeatherSphere">
    
    <!-- Icons - Using generated PNG files -->
    <link rel="icon" type="image/png" sizes="32x32" href="icon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon-16.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- External Resources -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Local Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Particle Background -->
    <div class="particles-container" id="particles"></div>

    <!-- Enhanced Header with Search -->
    <header class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title animate__animated animate__fadeInDown">
                    <i class="fas fa-cloud-sun weather-icon"></i>
                    WeatherSphere
                    <span class="version-tag">v2.0</span>
                </h1>
                <p class="hero-subtitle animate__animated animate__fadeInUp animate__delay-1s">
                    Real-time weather with stunning visuals and smart insights
                </p>
                
                <!-- Enhanced Search Bar -->
                <div class="search-container animate__animated animate__fadeInUp animate__delay-2s">
                    <div class="search-input-group">
                        <div class="search-input-wrapper">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="cityInput" placeholder="Search for any city worldwide..." 
                                   autocomplete="off" spellcheck="false">
                            <div class="search-suggestions" id="searchSuggestions"></div>
                        </div>
                        <div class="search-actions">
                            <button class="action-btn voice-btn" id="voiceBtn" title="Voice Search">
                                <i class="fas fa-microphone"></i>
                            </button>
                            <button class="action-btn location-btn" id="locationBtn" title="Get My Location">
                                <i class="fas fa-location-dot"></i>
                            </button>
                            <button class="action-btn settings-btn" id="settingsBtn" title="Settings">
                                <i class="fas fa-cog"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Weather Display -->
    <main class="main-content">
        <div class="container">
            <!-- Weather Dashboard -->
            <section class="weather-dashboard" id="weatherDashboard" style="display: none;">
                
                <!-- Current Weather Card -->
                <div class="weather-card current-weather animate__animated animate__fadeInUp">
                    <div class="card-header">
                        <div class="location-info">
                            <h2 class="location-name" id="locationName">Current Location</h2>
                            <p class="location-details" id="locationDetails">Getting location...</p>
                        </div>
                        <div class="weather-icon-large" id="weatherIconLarge">
                            <i class="fas fa-cloud-sun"></i>
                        </div>
                    </div>
                    
                    <div class="weather-main">
                        <div class="temperature-display">
                            <span class="temperature" id="currentTemp">--</span>
                            <span class="temp-unit">°C</span>
                        </div>
                        <div class="weather-description" id="weatherDescription">Loading weather...</div>
                        <div class="feels-like">Feels like <span id="feelsLike">--</span>°C</div>
                    </div>
                    
                    <div class="weather-stats">
                        <div class="stat-item">
                            <i class="fas fa-tint stat-icon"></i>
                            <div class="stat-content">
                                <span class="stat-label">Humidity</span>
                                <span class="stat-value" id="humidity">--%</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-wind stat-icon"></i>
                            <div class="stat-content">
                                <span class="stat-label">Wind Speed</span>
                                <span class="stat-value" id="windSpeed">-- km/h</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-gauge stat-icon"></i>
                            <div class="stat-content">
                                <span class="stat-label">Pressure</span>
                                <span class="stat-value" id="pressure">-- hPa</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-eye stat-icon"></i>
                            <div class="stat-content">
                                <span class="stat-label">Visibility</span>
                                <span class="stat-value" id="visibility">-- km</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Forecast Cards -->
                <div class="forecast-section">
                    <h3 class="section-title">5-Day Forecast</h3>
                    <div class="forecast-grid" id="forecastGrid">
                        <!-- Forecast items will be populated here -->
                    </div>
                </div>

                <!-- Additional Weather Info -->
                <div class="additional-info">
                    <div class="info-card sun-info">
                        <h4 class="info-title">
                            <i class="fas fa-sun"></i>
                            Sun & Moon
                        </h4>
                        <div class="sun-moon-display">
                            <div class="sun-item">
                                <i class="fas fa-sunrise"></i>
                                <div>
                                    <span class="label">Sunrise</span>
                                    <span class="time" id="sunrise">--:--</span>
                                </div>
                            </div>
                            <div class="sun-item">
                                <i class="fas fa-sunset"></i>
                                <div>
                                    <span class="label">Sunset</span>
                                    <span class="time" id="sunset">--:--</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="info-card air-quality">
                        <h4 class="info-title">
                            <i class="fas fa-wind"></i>
                            Air Quality
                        </h4>
                        <div class="air-quality-display">
                            <div class="aqi-circle" id="aqiCircle">
                                <span class="aqi-value" id="aqiValue">--</span>
                            </div>
                            <div class="aqi-info">
                                <span class="aqi-status" id="aqiStatus">Loading...</span>
                                <span class="aqi-description" id="aqiDescription">Getting air quality data</span>
                            </div>
                        </div>
                    </div>

                    <div class="info-card weather-chart">
                        <h4 class="info-title">
                            <i class="fas fa-chart-line"></i>
                            24-Hour Trend
                        </h4>
                        <canvas id="weatherChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </section>

            <!-- Loading State -->
            <section class="loading-section" id="loadingSection">
                <div class="loading-animation">
                    <div class="weather-loader">
                        <div class="cloud">
                            <div class="cloud-part cloud-part-1"></div>
                            <div class="cloud-part cloud-part-2"></div>
                            <div class="cloud-part cloud-part-3"></div>
                        </div>
                        <div class="rain">
                            <div class="rain-drop"></div>
                            <div class="rain-drop"></div>
                            <div class="rain-drop"></div>
                        </div>
                    </div>
                    <p class="loading-text">Getting weather data...</p>
                </div>
            </section>

            <!-- Error State -->
            <section class="error-section" id="errorSection" style="display: none;">
                <div class="error-content">
                    <i class="fas fa-exclamation-triangle error-icon"></i>
                    <h3 class="error-title">Unable to Get Weather Data</h3>
                    <p class="error-message" id="errorMessage">Please check your connection and try again.</p>
                    <button class="retry-btn" id="retryBtn">
                        <i class="fas fa-redo"></i>
                        Try Again
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-cog"></i>
                    Settings
                </h3>
                <button class="modal-close" id="closeSettings">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="settings-section">
                    <h4 class="settings-section-title">
                        <i class="fas fa-microphone"></i>
                        Voice Features
                    </h4>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Voice Search</span>
                            <span class="setting-description">Search cities using voice commands</span>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="voiceSearchToggle" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Speech Announcements</span>
                            <span class="setting-description">Hear weather updates spoken aloud</span>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="speechToggle" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4 class="settings-section-title">
                        <i class="fas fa-palette"></i>
                        Appearance
                    </h4>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Dark Theme</span>
                            <span class="setting-description">Use dark theme for better night viewing</span>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="darkThemeToggle">
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Animations</span>
                            <span class="setting-description">Enable smooth animations and transitions</span>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="animationsToggle" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4 class="settings-section-title">
                        <i class="fas fa-thermometer-half"></i>
                        Units
                    </h4>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Temperature Unit</span>
                            <span class="setting-description">Choose temperature display unit</span>
                        </div>
                        <select class="unit-select" id="tempUnitSelect">
                            <option value="celsius">Celsius (°C)</option>
                            <option value="fahrenheit">Fahrenheit (°F)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(function(registration) {
                    console.log('Service Worker registered successfully:', registration.scope);
                })
                .catch(function(error) {
                    console.log('Service Worker registration failed:', error);
                });
        }
    </script>
</body>
</html>